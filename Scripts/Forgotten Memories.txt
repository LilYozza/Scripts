local FullBright = loadstring(game:HttpGet('https://raw.githubusercontent.com/LilYozza/Scripts/main/Misc/FullBright.txt'))
local NameTag = loadstring(game:HttpGet('https://raw.githubusercontent.com/LilYozza/Scripts/main/Misc/NameTags.txt'))
local library = loadstring(game:HttpGet(('https://raw.githubusercontent.com/LilYozza/Scripts/main/Misc/UILibrary.txt')))()w = library:CreateWindow("Main") StatusWindow=library:CreateWindow("Status")

local Players=game:GetService("Players")
local Player=game.Players.LocalPlayer
local mouse = game.Players.LocalPlayer:GetMouse()

local Auto = w:CreateFolder("Features")
local StatusFolder=StatusWindow:CreateFolder("Status")
local Options=StatusWindow:CreateFolder("Options")

-->Base Variables<--
local TopGen,BottomGen,ShowTags,InstantPromptOn,AreaSelect
local Spawns=Workspace:WaitForChild("Spawns")
local WorkspaceUtilities=Workspace:WaitForChild("WorkspaceUtilities")

local VentsLever=WorkspaceUtilities:WaitForChild("VentsLever")
local Curtains=WorkspaceUtilities:WaitForChild("Curtains")
local BatteryPositions=WorkspaceUtilities:WaitForChild("BatteryPositions")
local GoldenFreddySpawnPositions=WorkspaceUtilities:WaitForChild("GoldenFreddySpawnPositions")

-->Tables<--
local AreaTeleports={Office,TopGenerator,BottomGenerator,Arcade}
--local PromptTable={TopGenPrompt,BottomGenPrompt,VentPrompt,CurtainPrompt}

-->Colors<--
local StatusColors=Color3.new(0,255,0)
local BatteryColors=Color3.new(0,0,255)
local GoldenFreddySpawnColors=Color3.new(212,175,55)

-->Finding Data<--
local function GetGenerators()for _,v in pairs(WorkspaceUtilities:GetChildren())do if v.Name=="Generator"and v:FindFirstChild("Properties")then if v.Properties.Location.Value=="North" then BottomGen=v end if v.Properties.Location.Value=="West" then TopGen=v end end end end
repeat GetGenerators()task.wait()until TopGen and BottomGen

AreaTeleports.Office=Spawns:FindFirstChild("SpawnLocation")
AreaTeleports.TopGenerator=TopGen:FindFirstChild("InteractPart")
AreaTeleports.BottomGenerator=BottomGen:FindFirstChild("InteractPart")
AreaTeleports.Arcade=VentsLever:FindFirstChild("InteractPart")

-->Non Return Functions<--
local function Touch(p,t)firetouchinterest(Player.Character:WaitForChild("HumanoidRootPart"),p,0)firetouchinterest(Player.Character:WaitForChild("HumanoidRootPart"),p,1)task.wait(t)end
local function MoveTo(p,offset)Player.Character:WaitForChild("HumanoidRootPart").CFrame=p.CFrame+offset end
local function CreateTag(p,color,str)GUI = Instance.new("BillboardGui", p)GUI.Name="Tag" GUI.StudsOffsetWorldSpace = Vector3.new(0,2.5,0)GUI.AlwaysOnTop = true GUI.Size = UDim2.new(0,100,0, 50)TextLabel = Instance.new("TextLabel", GUI)TextLabel.Text =str TextLabel.BackgroundTransparency = 1 TextLabel.Font = "ArialBold" TextLabel.TextSize = 15 TextLabel.TextColor3 = color TextLabel.Size = UDim2.new(1,0,1,0)end


-->Return Functions<--
local function GetBoolGen(b)if b then return "OFF" else return "ON" end end

-->Status Window<--
-->===========================Top Generator(West)========================================<--
local TopGeneratorLabel=StatusFolder:Label("Top Generator: ...",{
TextSize=20;TextColor=Color3.fromRGB(0,255,0);BgColor=Color3.fromRGB(0,0,0);})
TopGeneratorLabel:Refresh("Top Generator: "..GetBoolGen(TopGen.Properties.Shutdown.Value))
if ShowTags and TopGen.Properties.Shutdown.Value==true and not TopGen.DoorClose:FindFirstChild("Tag") then CreateTag(TopGen.DoorClose,StatusColors,"Turn On TopGen")end
-->Connecting Listener<--
local TopGeneratorLabel=TopGen.Properties.Shutdown.Changed:Connect(function()
    TopGeneratorLabel:Refresh("Top Generator: "..GetBoolGen(TopGen.Properties.Shutdown.Value))
    if ShowTags and TopGen.Properties.Shutdown.Value==true and not TopGen.DoorClose:FindFirstChild("Tag") then CreateTag(TopGen.DoorClose,StatusColors,"Turn On TopGen")
    else if TopGen.DoorClose:FindFirstChild("Tag")then TopGen.DoorClose.Tag:Destroy()end end
end)
-->======================================================================================<--

-->===================Bottom Generator(South)(North)=====================================<--
local BottomGeneratorLabel=StatusFolder:Label("Bottom Generator: ...",{
TextSize=20;TextColor=Color3.fromRGB(0,255,0);BgColor=Color3.fromRGB(0,0,0);})
BottomGeneratorLabel:Refresh("Bottom Generator: "..GetBoolGen(TopGen.Properties.Shutdown.Value))
if ShowTags and BottomGen.Properties.Shutdown.Value==true and not BottomGen.DoorClose:FindFirstChild("Tag") then CreateTag(BottomGen.DoorClose,StatusColors,"Turn On BottomGen")end
-->Connecting Listener<--
local SouthGenConnection=BottomGen.Properties.Shutdown.Changed:Connect(function()
    BottomGeneratorLabel:Refresh("Bottom Generator: "..GetBoolGen(BottomGen.Properties.Shutdown.Value))
    if ShowTags and BottomGen.Properties.Shutdown.Value==true and not BottomGen.DoorClose:FindFirstChild("Tag") then CreateTag(BottomGen.DoorClose,StatusColors,"Turn On BottomGen")
    else if BottomGen.DoorClose:FindFirstChild("Tag")then BottomGen.DoorClose.Tag:Destroy()end end
end)
-->======================================================================================<--

-->==============================Ventilation=============================================<--
local VentilationLabel=StatusFolder:Label("Ventilation: ...",{
TextSize=20;TextColor=Color3.fromRGB(0,255,0);BgColor=Color3.fromRGB(0,0,0);})
VentilationLabel:Refresh("Ventilation: "..GetBoolGen(VentsLever.Properties.Shutdown.Value))
if ShowTags and VentsLever.Properties.Shutdown.Value==true and not VentsLever.InteractPart:FindFirstChild("Tag") then CreateTag(VentsLever.InteractPart,StatusColors,"Turn On Vent")end
-->Connecting Listener<--
local VentilationConnection=VentsLever.Properties.Shutdown.Changed:Connect(function()
    VentilationLabel:Refresh("Ventilation: "..GetBoolGen(VentsLever.Properties.Shutdown.Value))
    if ShowTags and VentsLever.Properties.Shutdown.Value==true and not VentsLever.InteractPart:FindFirstChild("Tag") then CreateTag(VentsLever.InteractPart,StatusColors,"Turn On Vent")
    else if VentsLever.InteractPart:FindFirstChild("Tag")then VentsLever.InteractPart.Tag:Destroy()end end
end)
-->======================================================================================<--

-->==============================The Puppet==============================================<--
local InBox=CFrame.new(-78.157402, 0.0721008182, -165.951859, -1, 0, 0, 0, 1, 0, 0, 0, -1)
local Marionette=Workspace:WaitForChild("Marionette")
 if Marionette then local PuppetLabel=StatusFolder:Label("The Puppet: IN BOX",{
TextSize=20;TextColor=Color3.fromRGB(0,255,0);BgColor=Color3.fromRGB(0,0,0);})

-->Connecting Listener<--
local PuppetConnection1=Workspace.ChildRemoved:Connect(function(obj)
    if obj.Name=="Marionette" and not Workspace:FindFirstChild("Marionette")then
        PuppetLabel:Refresh("The Puppet: MISSING")
        if ShowTags and not Curtains.InteractPart:FindFirstChild("Tag")then CreateTag(Curtains.InteractPart,StatusColors,"Puppet Missing")end
    end
end)

local PuppetConnection2=Workspace.ChildAdded:Connect(function(obj)task.wait()
    if obj.Name=="Marionette" and obj:FindFirstChild("RootPart") and obj.RootPart.CFrame==InBox then
        PuppetLabel:Refresh("The Puppet: IN BOX")
        if Curtains.InteractPart:FindFirstChild("Tag") then Curtains.InteractPart.Tag:Destroy()end
    end
end)end
-->======================================================================================<--

--[[
local PuppetCFrame=CFrame.new(-78.157402, 0.0721008182, -165.951859, -1, 0, 0, 0, 1, 0, 0, 0, -1)
-->==============================The Puppet==============================================<--
local PuppetLabel=StatusFolder:Label("The Puppet: ...",{
TextSize=20;TextColor=Color3.fromRGB(0,255,0);BgColor=Color3.fromRGB(0,0,0);})
if Marionette.RootPart.CFrame==PuppetCFrame then PuppetLabel:Refresh("The Puppet: HIDDEN")else PuppetLabel:Refresh("The Puppet: SHOWN")end
if Marionette.RootPart.CFrame~=PuppetCFrame and not Curtains.InteractPart:FindFirstChild("Tag") then CreateTag(Curtains.InteractPart,"Close Curtains")end
-->Connecting Listener<--
local PuppetConnection=Marionette.RootPart.Changed:Connect(function()
    print("Changed")
    if Marionette.RootPart.CFrame~=PuppetCFrame then
        PuppetLabel:Refresh("The Puppet: SHOWN")
        if not Curtains.InteractPart:FindFirstChild("Tag") then CreateTag(Curtains.InteractPart,"Close Curtains")end
    elseif Marionette.RootPart.CFrame==PuppetCFrame then
        PuppetLabel:Refresh("The Puppet: HIDDEN")
        if Curtains.InteractPart:FindFirstChild("Tag") then Curtains.InteractPart.Tag:Destroy()end 
    end
end)
-->======================================================================================<--
--]]

--[[
local F1Connection = mouse.KeyDown:connect(function(k)
    if k=="e" and InstantPromptOn then
        
    end
end)
--]]

Options:Toggle("Show Tags",function(bool)
    shared.ToggleST=bool
    spawn(function()
        if shared.ToggleST then ShowTags=true
            if TopGen.Properties.Shutdown.Value==true and not TopGen.DoorClose:FindFirstChild("Tag") then CreateTag(TopGen.DoorClose,StatusColors,"Turn On TopGen")end
            if BottomGen.Properties.Shutdown.Value==true and not BottomGen.DoorClose:FindFirstChild("Tag") then CreateTag(BottomGen.DoorClose,StatusColors,"Turn On BottomGen")end
            if VentsLever.Properties.Shutdown.Value==true and not VentsLever.InteractPart:FindFirstChild("Tag") then CreateTag(VentsLever.InteractPart,StatusColors,"Turn On Vent")end
            if Workspace:FindFirstChild("Marionette")and Workspace.Marionette.RootPart.CFrame~=InBox and not Curtains.InteractPart:FindFirstChild("Tag")then CreateTag(Curtains.InteractPart,StatusColors,"Puppet Missing")end
        else ShowTags=false
            for _,v in pairs(Workspace:GetDescendants())do
                if v:IsA("TextLabel")and v.Parent.Name=="Tag" then v.Parent:Destroy()end
            end
        end
    end)
end)

Options:Toggle("Batteries",function(bool)
    shared.ToggleB=bool
    spawn(function()
        for _,v in pairs(BatteryPositions:GetChildren())do
            if v:FindFirstChild("InteractPart")then
                if shared.ToggleB and not v.InteractPart:FindFirstChild("Tag") then CreateTag(v.InteractPart,BatteryColors,"Battery")
                elseif not shared.ToggleB and v.InteractPart:FindFirstChild("Tag") then v.InteractPart.Tag:Destroy()end
            end
        end
    end)
end)

Options:Toggle("GFred Spawns",function(bool)
    shared.ToggleGF=bool
    spawn(function()
        for _,v in pairs(GoldenFreddySpawnPositions:GetChildren())do
            if v:IsA("BasePart")then
                if shared.ToggleGF and not v:FindFirstChild("Tag") then CreateTag(v,GoldenFreddySpawnColors,"Golden Freedy Spawn")
                elseif not shared.ToggleGF and v:FindFirstChild("Tag") then v.Tag:Destroy()end
            end
        end
    end)
end)

--[[
Options:Toggle("Inst Prompt",function(bool)
    shared.ToggleIP=bool InstantPromptOn=bool
end)
--]]
--###################################################AUTO#################################################
--TODO
    
Auto:Toggle("Full Bright",function(bool)shared.Auto1 = bool spawn (function()FullBright()end)end)

P1Connection,P2Connection,P3Connection=nil
Auto:Toggle("PlayerNames",function(bool)
    shared.Misc5 = bool
    spawn(function()
        if shared.Misc5 then NameTag() else
            if P1Connection then P1Connection:Disconnect()end if P2Connection then P2Connection:Disconnect()end if P3Connection then P3Connection:Disconnect()end
            for _,v in pairs(Players:GetChildren()) do
                if v.Character:WaitForChild("Head",5) and v.Character.Head:FindFirstChild("PlayerTag") then
                    v.Character.Head:FindFirstChild("PlayerTag"):Destroy()
                end
            end 
        end
        task.wait()
    end)
end)

local AreaList={"Office","TopGenerator","BottomGenerator","Arcade"}
local AreaDropList = Auto:Dropdown("Select Area",AreaList,true,function(SItem) --true/false, replaces the current title "Dropdown" with the option that t
    --AreaSelect = SItem
    for _,v in pairs(AreaTeleports)do
        if SItem==_ then AreaSelect=v end
    end
end)

Auto:Button("Teleport",function()
    spawn(function()
        if AreaSelect then
            MoveTo(AreaSelect,Vector3.new(0,0,0))
        end
    end)
end)

Auto:Button("Other",function()
    spawn(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/GMWJKIHGJIWNHIOWNHIUJHYW536363/Reapers-Hub/reaperrr/Free%20Script.lua"))()
    end)
end)

local Miscload = loadstring(game:HttpGet('https://raw.githubusercontent.com/LilYozza/Scripts/main/Misc/Misc.txt'))()
